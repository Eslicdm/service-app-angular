<div class="container mx-auto p-6">
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">Pricing</h1>
  </div>

  @switch (pricingState().status) {
    @case ('loading') {
      <div class="flex items-center justify-center p-8"><mat-spinner /></div>
    }
    @case ('error') {
      <p class="text-center text-red-600 p-6">Failed to load prices. Please try again later.</p>
    }
    @case ('loaded') {
      <div class="grid grid-cols-[repeat(auto-fill,minmax(320px,1fr))] gap-4">
        @for (price of pricingState().prices; track price.id) {
          <mat-card class="price-card">
            <mat-card-header>
              <mat-card-title>{{ price.priceType | titlecase }}</mat-card-title>
              <mat-card-subtitle>{{ price.value }}</mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
              <p class="mb-4" >{{ price.description }}</p>
              <p class="text-sm text-gray-300">
                <strong>Created:</strong> {{ price.createdAt | date:'short' }}
              </p>
              <p class="text-sm text-gray-300">
                <strong>Updated:</strong> {{ price.updatedAt | date:'short' }}
              </p>
            </mat-card-content>
            <mat-card-actions class="flex justify-end gap-2">
              <button mat-icon-button (click)="openEditDialog(price)"
                      [attr.data-testid]="'edit-price-' + price.priceType">
                <mat-icon>edit</mat-icon>
              </button>
            </mat-card-actions>
          </mat-card>
        }
      </div>
    }
  }
</div>
